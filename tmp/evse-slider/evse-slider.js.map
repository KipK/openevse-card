{"version":3,"file":"evse-slider.js","sourceRoot":"","sources":["../../src/evse-slider/evse-slider.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, html, css, PropertyValues } from 'lit';\r\nimport { customElement, property, state, eventOptions } from 'lit/decorators.js';\r\n\r\n@customElement('evse-slider')\r\nexport class EVSESlider extends LitElement {\r\n\t@property({ type: Number }) min = 0;\r\n\t@property({ type: Number }) max = 32;\r\n\t@property({ type: Number }) step = 1;\r\n\t@property({ type: Number }) value = 0;\r\n\t@property({ type: String }) unit = 'A';\r\n\t@property({ type: Boolean }) disabled = false;\r\n\t@property({ type: String }) label = 'Charge Rate';\r\n\r\n\t@state() private _sliderValue = 0;\r\n\t@state() private _dragging = false;\r\n\r\n\t// Event listeners\r\n\tprivate _boundHandleSliderMove: (e: MouseEvent | TouchEvent) => void;\r\n\tprivate _boundHandleSliderEnd: (e: MouseEvent | TouchEvent) => void;\r\n\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis._boundHandleSliderMove = this._handleSliderMove.bind(this);\r\n\t\tthis._boundHandleSliderEnd = this._handleSliderEnd.bind(this);\r\n\t}\r\n\r\n\toverride updated(changedProps: PropertyValues) {\r\n\t\tif (changedProps.has('value') && !this._dragging) {\r\n\t\t\tthis._sliderValue = this.value;\r\n\t\t}\r\n\t}\r\n\r\n\toverride connectedCallback() {\r\n\t\tsuper.connectedCallback();\r\n\t\tthis._sliderValue = this.value;\r\n\t}\r\n\r\n\toverride disconnectedCallback() {\r\n\t\tsuper.disconnectedCallback();\r\n\t\tthis._removeEventListeners();\r\n\t}\r\n\r\n\tprivate get _percentage() {\r\n\t\treturn ((this._sliderValue - this.min) / (this.max - this.min)) * 100;\r\n\t}\r\n\r\n\tprivate _formatValue(val: number): string {\r\n\t\treturn this.step < 1 ? val.toFixed(1) : val.toFixed(0);\r\n\t}\r\n\r\n\t@eventOptions({ passive: true })\r\n\tprivate _handleSliderStart(e: MouseEvent | TouchEvent) {\r\n\t\tif (this.disabled) return;\r\n\r\n\t\tthis._dragging = true;\r\n\t\tthis._updateSliderValue(e);\r\n\r\n\t\twindow.addEventListener('mousemove', this._boundHandleSliderMove);\r\n\t\twindow.addEventListener('touchmove', this._boundHandleSliderMove);\r\n\t\twindow.addEventListener('mouseup', this._boundHandleSliderEnd);\r\n\t\twindow.addEventListener('touchend', this._boundHandleSliderEnd);\r\n\t}\r\n\r\n\tprivate _handleSliderMove(e: MouseEvent | TouchEvent) {\r\n\t\tif (this._dragging) {\r\n\t\t\tthis._updateSliderValue(e);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _handleSliderEnd() {\r\n\t\tif (this._dragging) {\r\n\t\t\tthis._removeEventListeners();\r\n\r\n\t\t\t// Notify about the value change\r\n\t\t\tthis.dispatchEvent(new CustomEvent('value-changed', {\r\n\t\t\t\tdetail: { value: this._sliderValue },\r\n\t\t\t\tbubbles: true,\r\n\t\t\t\tcomposed: true\r\n\t\t\t}));\r\n\r\n\t\t\t// Small delay for visual feedback\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tthis._dragging = false;\r\n\t\t\t}, 100);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate _removeEventListeners() {\r\n\t\twindow.removeEventListener('mousemove', this._boundHandleSliderMove);\r\n\t\twindow.removeEventListener('touchmove', this._boundHandleSliderMove);\r\n\t\twindow.removeEventListener('mouseup', this._boundHandleSliderEnd);\r\n\t\twindow.removeEventListener('touchend', this._boundHandleSliderEnd);\r\n\t}\r\n\r\n\tprivate _updateSliderValue(e: MouseEvent | TouchEvent) {\r\n\t\tconst track = this.shadowRoot?.querySelector('.slider-wrapper');\r\n\t\tif (!track) return;\r\n\r\n\t\tconst trackRect = track.getBoundingClientRect();\r\n\r\n\t\t// Get cursor/touch position\r\n\t\tlet x: number;\r\n\t\tif ('touches' in e) {\r\n\t\t\tx = e.touches[0].clientX;\r\n\t\t} else {\r\n\t\t\tx = (e as MouseEvent).clientX;\r\n\t\t}\r\n\r\n\t\t// Calculate percentage along track\r\n\t\tlet percentage = (x - trackRect.left) / trackRect.width;\r\n\t\tpercentage = Math.min(Math.max(percentage, 0), 1);\r\n\r\n\t\t// Calculate value with min/max/step constraints\r\n\t\tlet value = this.min + percentage * (this.max - this.min);\r\n\t\tvalue = Math.round(value / this.step) * this.step;\r\n\t\tvalue = Math.min(Math.max(value, this.min), this.max);\r\n\r\n\t\t// Update state\r\n\t\tthis._sliderValue = Number(value.toFixed(2));\r\n\t\tthis.requestUpdate();\r\n\t}\r\n\r\n\tstatic override styles = css`\r\n    :host {\r\n      display: block;\r\n      --evse-slider-color: var(--primary-color, #03a9f4);\r\n      margin-bottom: 20px;\r\n    }\r\n    \r\n    .slider-container {\r\n      border-radius: 10px;\r\n      padding: 8px;\r\n      padding-bottom: 15px;\r\n      padding-top: 15px;\r\n      background-color: transparent;\r\n\t  border: 1px solid var(--divider-color, #e0e0e0);\r\n\r\n    }\r\n    \r\n    .slider-row {\r\n      display: flex;\r\n      justify-content: center;\r\n      align-items: center;\r\n      margin-bottom: 8px;\r\n    }\r\n    \r\n    .slider-label {\r\n      display: flex;\r\n      justify-content: center;\r\n      color: var(--primary-text-color, #212121);\r\n      font-weight: bold;\r\n      text-transform: capitalize;\r\n    }\r\n    \r\n    .slider-wrapper {\r\n      position: relative;\r\n      height: 22px;\r\n      width: 70%;\r\n      border-radius: 6px;\r\n      display: flex;\r\n      align-items: center;\r\n      background: var(--divider-color, #e0e0e0);\r\n      box-shadow: var(--control-button-background, none);\r\n      touch-action: none; /* Prevent scrolling on touch */\r\n    }\r\n    \r\n    .slider-knob {\r\n      position: absolute;\r\n      height: 32px;\r\n      width: 32px;\r\n      border-radius: 50%;\r\n      background: transparent;\r\n      z-index: 1;\r\n      cursor: pointer;\r\n    }\r\n    \r\n    .slider-track {\r\n      position: absolute;\r\n      height: 100%;\r\n      border-radius: 6px;\r\n      background: var(--evse-slider-color);\r\n      opacity: 1;\r\n    }\r\n    \r\n    .slider-badge {\r\n      display: flex;\r\n      justify-content: center;\r\n      margin-left: 8px;\r\n      color: var(--evse-slider-color);\r\n      font-size: 1.2rem;\r\n      padding: 4px 8px;\r\n      border-radius: 4px;\r\n      font-weight: bold;\r\n    }\r\n    \r\n    .clickable {\r\n      cursor: pointer;\r\n      text-decoration: none;\r\n    }\r\n    \r\n    :host([disabled]) .slider-wrapper {\r\n      opacity: 0.5;\r\n      cursor: not-allowed;\r\n    }\r\n    \r\n    :host([disabled]) .slider-track, \r\n    :host([disabled]) .slider-knob {\r\n      cursor: not-allowed;\r\n    }\r\n  `;\r\n\r\n\toverride render() {\r\n\t\treturn html`\r\n      <div class=\"slider-container\">\r\n        <div class=\"slider-label\">${this.label}</div>\r\n        <div class=\"slider-badge\">\r\n          ${this._formatValue(this._sliderValue)} ${this.unit}\r\n        </div>\r\n        <div class=\"slider-row\">\r\n          <div \r\n            class=\"slider-wrapper\"\r\n            @mousedown=${this._handleSliderStart}\r\n            @touchstart=${this._handleSliderStart}\r\n          >\r\n            <div\r\n              class=\"slider-track clickable\"\r\n              style=\"width: ${this._percentage}%\"\r\n            ></div>\r\n            <div\r\n              class=\"slider-knob\"\r\n              style=\"left: calc(${this._percentage}% - 16px)\"\r\n            ></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    `;\r\n\t}\r\n}\r\n"]}